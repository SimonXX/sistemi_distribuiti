import { Directive, TemplateRef } from '@angular/core';
import * as i0 from "@angular/core";
export class SplitGutterDirective {
    constructor(template) {
        this.template = template;
        /**
         * The map holds reference to the drag handle elements inside instances
         * of the provided template.
         */
        this.gutterToHandleElementMap = new Map();
        /**
         * The map holds reference to the excluded drag elements inside instances
         * of the provided template.
         */
        this.gutterToExcludeDragElementMap = new Map();
    }
    canStartDragging(originElement, gutterNum) {
        if (this.gutterToExcludeDragElementMap.has(gutterNum)) {
            const isInsideExclude = this.gutterToExcludeDragElementMap
                .get(gutterNum)
                .some((gutterExcludeElement) => gutterExcludeElement.nativeElement.contains(originElement));
            if (isInsideExclude) {
                return false;
            }
        }
        if (this.gutterToHandleElementMap.has(gutterNum)) {
            return this.gutterToHandleElementMap
                .get(gutterNum)
                .some((gutterHandleElement) => gutterHandleElement.nativeElement.contains(originElement));
        }
        return true;
    }
    addToMap(map, gutterNum, elementRef) {
        if (map.has(gutterNum)) {
            map.get(gutterNum).push(elementRef);
        }
        else {
            map.set(gutterNum, [elementRef]);
        }
    }
    removedFromMap(map, gutterNum, elementRef) {
        const elements = map.get(gutterNum);
        elements.splice(elements.indexOf(elementRef), 1);
        if (elements.length === 0) {
            map.delete(gutterNum);
        }
    }
    static ngTemplateContextGuard(dir, ctx) {
        return true;
    }
    /** @nocollapse */ static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.1.0", ngImport: i0, type: SplitGutterDirective, deps: [{ token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive }); }
    /** @nocollapse */ static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "17.1.0", type: SplitGutterDirective, selector: "[asSplitGutter]", ngImport: i0 }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.1.0", ngImport: i0, type: SplitGutterDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[asSplitGutter]',
                }]
        }], ctorParameters: () => [{ type: i0.TemplateRef }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BsaXQtZ3V0dGVyLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FuZ3VsYXItc3BsaXQvc3JjL2xpYi9ndXR0ZXIvc3BsaXQtZ3V0dGVyLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFjLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQTs7QUFzQ2xFLE1BQU0sT0FBTyxvQkFBb0I7SUFZL0IsWUFBbUIsUUFBaUQ7UUFBakQsYUFBUSxHQUFSLFFBQVEsQ0FBeUM7UUFYcEU7OztXQUdHO1FBQ0gsNkJBQXdCLEdBQUcsSUFBSSxHQUFHLEVBQXFDLENBQUE7UUFDdkU7OztXQUdHO1FBQ0gsa0NBQTZCLEdBQUcsSUFBSSxHQUFHLEVBQXFDLENBQUE7SUFFTCxDQUFDO0lBRXhFLGdCQUFnQixDQUFDLGFBQTBCLEVBQUUsU0FBaUI7UUFDNUQsSUFBSSxJQUFJLENBQUMsNkJBQTZCLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3JELE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyw2QkFBNkI7aUJBQ3ZELEdBQUcsQ0FBQyxTQUFTLENBQUM7aUJBQ2QsSUFBSSxDQUFDLENBQUMsb0JBQW9CLEVBQUUsRUFBRSxDQUFDLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQTtZQUU3RixJQUFJLGVBQWUsRUFBRTtnQkFDbkIsT0FBTyxLQUFLLENBQUE7YUFDYjtTQUNGO1FBRUQsSUFBSSxJQUFJLENBQUMsd0JBQXdCLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ2hELE9BQU8sSUFBSSxDQUFDLHdCQUF3QjtpQkFDakMsR0FBRyxDQUFDLFNBQVMsQ0FBQztpQkFDZCxJQUFJLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLENBQUMsbUJBQW1CLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFBO1NBQzVGO1FBRUQsT0FBTyxJQUFJLENBQUE7SUFDYixDQUFDO0lBRUQsUUFBUSxDQUFDLEdBQTJDLEVBQUUsU0FBaUIsRUFBRSxVQUFtQztRQUMxRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDdEIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUE7U0FDcEM7YUFBTTtZQUNMLEdBQUcsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQTtTQUNqQztJQUNILENBQUM7SUFFRCxjQUFjLENBQ1osR0FBMkMsRUFDM0MsU0FBaUIsRUFDakIsVUFBbUM7UUFFbkMsTUFBTSxRQUFRLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNuQyxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFFaEQsSUFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUN6QixHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1NBQ3RCO0lBQ0gsQ0FBQztJQUVELE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxHQUF5QixFQUFFLEdBQVk7UUFDbkUsT0FBTyxJQUFJLENBQUE7SUFDYixDQUFDO2lJQXpEVSxvQkFBb0I7cUhBQXBCLG9CQUFvQjs7MkZBQXBCLG9CQUFvQjtrQkFIaEMsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsaUJBQWlCO2lCQUM1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuaW1wb3J0IHsgSUFyZWEgfSBmcm9tICcuLi9pbnRlcmZhY2UnXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3BsaXRHdXR0ZXJUZW1wbGF0ZUNvbnRleHQge1xuICAvKipcbiAgICogVGhlIGFyZWEgYmVmb3JlIHRoZSBndXR0ZXIuXG4gICAqIEluIFJUTCB0aGUgcmlnaHQgYXJlYSBhbmQgaW4gTFRSIHRoZSBsZWZ0IGFyZWFcbiAgICovXG4gIGFyZWFCZWZvcmU6IElBcmVhXG4gIC8qKlxuICAgKiBUaGUgYXJlYSBhZnRlciB0aGUgZ3V0dGVyLlxuICAgKiBJbiBSVEwgdGhlIGxlZnQgYXJlYSBhbmQgaW4gTFRSIHRoZSByaWdodCBhcmVhXG4gICAqL1xuICBhcmVhQWZ0ZXI6IElBcmVhXG4gIC8qKlxuICAgKiBUaGUgYWJzb2x1dGUgbnVtYmVyIG9mIHRoZSBndXR0ZXIgYmFzZWQgb24gZGlyZWN0aW9uIChSVEwgYW5kIExUUikuXG4gICAqIEZpcnN0IGd1dHRlciBpcyAxLCBzZWNvbmQgaXMgMiwgZXRjLi4uXG4gICAqL1xuICBndXR0ZXJOdW06IG51bWJlclxuICAvKipcbiAgICogV2hldGhlciB0aGlzIGlzIHRoZSBmaXJzdCBndXR0ZXIuXG4gICAqIEluIFJUTCB0aGUgbW9zdCByaWdodCBhcmVhIGFuZCBpbiBMVFIgdGhlIG1vc3QgbGVmdCBhcmVhXG4gICAqL1xuICBmaXJzdDogYm9vbGVhblxuICAvKipcbiAgICogV2hldGhlciB0aGlzIGlzIHRoZSBsYXN0IGd1dHRlci5cbiAgICogSW4gUlRMIHRoZSBtb3N0IGxlZnQgYXJlYSBhbmQgaW4gTFRSIHRoZSBtb3N0IHJpZ2h0IGFyZWFcbiAgICovXG4gIGxhc3Q6IGJvb2xlYW5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGd1dHRlciBpcyBiZWluZyBkcmFnZ2VkIG5vd1xuICAgKi9cbiAgaXNEcmFnZ2VkOiBib29sZWFuXG59XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1thc1NwbGl0R3V0dGVyXScsXG59KVxuZXhwb3J0IGNsYXNzIFNwbGl0R3V0dGVyRGlyZWN0aXZlIHtcbiAgLyoqXG4gICAqIFRoZSBtYXAgaG9sZHMgcmVmZXJlbmNlIHRvIHRoZSBkcmFnIGhhbmRsZSBlbGVtZW50cyBpbnNpZGUgaW5zdGFuY2VzXG4gICAqIG9mIHRoZSBwcm92aWRlZCB0ZW1wbGF0ZS5cbiAgICovXG4gIGd1dHRlclRvSGFuZGxlRWxlbWVudE1hcCA9IG5ldyBNYXA8bnVtYmVyLCBFbGVtZW50UmVmPEhUTUxFbGVtZW50PltdPigpXG4gIC8qKlxuICAgKiBUaGUgbWFwIGhvbGRzIHJlZmVyZW5jZSB0byB0aGUgZXhjbHVkZWQgZHJhZyBlbGVtZW50cyBpbnNpZGUgaW5zdGFuY2VzXG4gICAqIG9mIHRoZSBwcm92aWRlZCB0ZW1wbGF0ZS5cbiAgICovXG4gIGd1dHRlclRvRXhjbHVkZURyYWdFbGVtZW50TWFwID0gbmV3IE1hcDxudW1iZXIsIEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+W10+KClcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPFNwbGl0R3V0dGVyVGVtcGxhdGVDb250ZXh0Pikge31cblxuICBjYW5TdGFydERyYWdnaW5nKG9yaWdpbkVsZW1lbnQ6IEhUTUxFbGVtZW50LCBndXR0ZXJOdW06IG51bWJlcikge1xuICAgIGlmICh0aGlzLmd1dHRlclRvRXhjbHVkZURyYWdFbGVtZW50TWFwLmhhcyhndXR0ZXJOdW0pKSB7XG4gICAgICBjb25zdCBpc0luc2lkZUV4Y2x1ZGUgPSB0aGlzLmd1dHRlclRvRXhjbHVkZURyYWdFbGVtZW50TWFwXG4gICAgICAgIC5nZXQoZ3V0dGVyTnVtKVxuICAgICAgICAuc29tZSgoZ3V0dGVyRXhjbHVkZUVsZW1lbnQpID0+IGd1dHRlckV4Y2x1ZGVFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuY29udGFpbnMob3JpZ2luRWxlbWVudCkpXG5cbiAgICAgIGlmIChpc0luc2lkZUV4Y2x1ZGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZ3V0dGVyVG9IYW5kbGVFbGVtZW50TWFwLmhhcyhndXR0ZXJOdW0pKSB7XG4gICAgICByZXR1cm4gdGhpcy5ndXR0ZXJUb0hhbmRsZUVsZW1lbnRNYXBcbiAgICAgICAgLmdldChndXR0ZXJOdW0pXG4gICAgICAgIC5zb21lKChndXR0ZXJIYW5kbGVFbGVtZW50KSA9PiBndXR0ZXJIYW5kbGVFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuY29udGFpbnMob3JpZ2luRWxlbWVudCkpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFkZFRvTWFwKG1hcDogTWFwPG51bWJlciwgRWxlbWVudFJlZjxIVE1MRWxlbWVudD5bXT4sIGd1dHRlck51bTogbnVtYmVyLCBlbGVtZW50UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50Pikge1xuICAgIGlmIChtYXAuaGFzKGd1dHRlck51bSkpIHtcbiAgICAgIG1hcC5nZXQoZ3V0dGVyTnVtKS5wdXNoKGVsZW1lbnRSZWYpXG4gICAgfSBlbHNlIHtcbiAgICAgIG1hcC5zZXQoZ3V0dGVyTnVtLCBbZWxlbWVudFJlZl0pXG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlZEZyb21NYXAoXG4gICAgbWFwOiBNYXA8bnVtYmVyLCBFbGVtZW50UmVmPEhUTUxFbGVtZW50PltdPixcbiAgICBndXR0ZXJOdW06IG51bWJlcixcbiAgICBlbGVtZW50UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PixcbiAgKSB7XG4gICAgY29uc3QgZWxlbWVudHMgPSBtYXAuZ2V0KGd1dHRlck51bSlcbiAgICBlbGVtZW50cy5zcGxpY2UoZWxlbWVudHMuaW5kZXhPZihlbGVtZW50UmVmKSwgMSlcblxuICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIG1hcC5kZWxldGUoZ3V0dGVyTnVtKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBuZ1RlbXBsYXRlQ29udGV4dEd1YXJkKGRpcjogU3BsaXRHdXR0ZXJEaXJlY3RpdmUsIGN0eDogdW5rbm93bik6IGN0eCBpcyBTcGxpdEd1dHRlclRlbXBsYXRlQ29udGV4dCB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuIl19